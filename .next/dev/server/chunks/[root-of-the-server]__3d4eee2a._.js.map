{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 136, "column": 0}, "map": {"version":3,"sources":["file:///Users/med_yassine_khlaf/Documents/GitHub/PetConnect_PWA/app/api/adoption-request/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\nimport nodemailer from \"nodemailer\";\n\nexport async function POST(req: Request) {\n  console.log(\"API adoption-request POST called\"); // ✅ Log 1\n\n  try {\n    const { name, email, phone, animal, message } = await req.json();\n    console.log(\"Payload reçu:\", { name, email, phone, animal, message }); // ✅ Log 2\n\n    if (!name || !email || !phone || !animal || !message) {\n      console.log(\"Erreur: tous les champs sont requis\");\n      return NextResponse.json(\n        { error: \"Tous les champs sont requis.\" },\n        { status: 400 }\n      );\n    }\n\n    const transporter = nodemailer.createTransport({\n      service: \"gmail\",\n      auth: {\n        user: process.env.EMAIL_USER,\n        pass: process.env.EMAIL_PASS,\n      },\n    });\n\n    const mailOptions = {\n      from: email,\n      to: process.env.EMAIL_USER, // envoie vers toi\n      subject: `Nouvelle demande d’adoption pour ${animal}`,\n      text: `\nNouvelle demande d’adoption reçue :\n\nNom : ${name}\nEmail : ${email}\nTéléphone : ${phone}\nAnimal choisi : ${animal}\n\nMessage :\n${message}\n      `,\n    };\n\n    const info = await transporter.sendMail(mailOptions);\n    console.log(\"Email envoyé:\", info); // ✅ Log 3\n\n    return NextResponse.json({\n      success: true,\n      message: \"Email envoyé avec succès.\",\n    });\n  } catch (error) {\n    console.error(\"Erreur envoi email:\", error); // ✅ Log 4\n    return NextResponse.json(\n      { error: \"Erreur lors de l’envoi de l’email.\" },\n      { status: 500 }\n    );\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,eAAe,KAAK,GAAY;IACrC,QAAQ,GAAG,CAAC,qCAAqC,UAAU;IAE3D,IAAI;QACF,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,EAAE,MAAM,EAAE,OAAO,EAAE,GAAG,MAAM,IAAI,IAAI;QAC9D,QAAQ,GAAG,CAAC,iBAAiB;YAAE;YAAM;YAAO;YAAO;YAAQ;QAAQ,IAAI,UAAU;QAEjF,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,SAAS,CAAC,UAAU,CAAC,SAAS;YACpD,QAAQ,GAAG,CAAC;YACZ,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAA+B,GACxC;gBAAE,QAAQ;YAAI;QAElB;QAEA,MAAM,cAAc,4JAAU,CAAC,eAAe,CAAC;YAC7C,SAAS;YACT,MAAM;gBACJ,MAAM,QAAQ,GAAG,CAAC,UAAU;gBAC5B,MAAM,QAAQ,GAAG,CAAC,UAAU;YAC9B;QACF;QAEA,MAAM,cAAc;YAClB,MAAM;YACN,IAAI,QAAQ,GAAG,CAAC,UAAU;YAC1B,SAAS,CAAC,iCAAiC,EAAE,QAAQ;YACrD,MAAM,CAAC;;;MAGP,EAAE,KAAK;QACL,EAAE,MAAM;YACJ,EAAE,MAAM;gBACJ,EAAE,OAAO;;;AAGzB,EAAE,QAAQ;MACJ,CAAC;QACH;QAEA,MAAM,OAAO,MAAM,YAAY,QAAQ,CAAC;QACxC,QAAQ,GAAG,CAAC,iBAAiB,OAAO,UAAU;QAE9C,OAAO,gJAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT,SAAS;QACX;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,uBAAuB,QAAQ,UAAU;QACvD,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAAqC,GAC9C;YAAE,QAAQ;QAAI;IAElB;AACF","debugId":null}}]
}