{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///Users/med_yassine_khlaf/Documents/GitHub/PetConnect_PWA/lib/db.ts"],"sourcesContent":["import mongoose from \"mongoose\";\n\nconst MONGODB_URI =\n  process.env.MONGODB_URI || \"mongodb://localhost:27017/petconnect\";\n\nif (!MONGODB_URI) {\n  throw new Error(\n    \"Please define the MONGODB_URI environment variable inside .env.local\"\n  );\n}\n\nlet cached = (global as any).mongoose;\n\nif (!cached) {\n  cached = (global as any).mongoose = { conn: null, promise: null };\n}\n\nasync function connectDB() {\n  if (cached.conn) {\n    return cached.conn;\n  }\n  if (!cached.promise) {\n    const opts = {\n      bufferCommands: false,\n    };\n    cached.promise = mongoose.connect(MONGODB_URI, opts).then((mongoose) => {\n      console.log(\"Connexion √† la base de donn√©es r√©ussie\");\n      return mongoose;\n    });\n  }\n  cached.conn = await cached.promise;\n  return cached.conn;\n}\n\nexport default connectDB;\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,cACJ,QAAQ,GAAG,CAAC,WAAW,IAAI;AAE7B;;AAMA,IAAI,SAAS,yDAAgB,QAAQ;AAErC,IAAI,CAAC,QAAQ;IACX,SAAS,yDAAgB,QAAQ,GAAG;QAAE,MAAM;QAAM,SAAS;IAAK;AAClE;AAEA,eAAe;IACb,IAAI,OAAO,IAAI,EAAE;QACf,OAAO,OAAO,IAAI;IACpB;IACA,IAAI,CAAC,OAAO,OAAO,EAAE;QACnB,MAAM,OAAO;YACX,gBAAgB;QAClB;QACA,OAAO,OAAO,GAAG,oHAAQ,CAAC,OAAO,CAAC,aAAa,MAAM,IAAI,CAAC,CAAC;YACzD,QAAQ,GAAG,CAAC;YACZ,OAAO;QACT;IACF;IACA,OAAO,IAAI,GAAG,MAAM,OAAO,OAAO;IAClC,OAAO,OAAO,IAAI;AACpB;uCAEe","debugId":null}},
    {"offset": {"line": 95, "column": 0}, "map": {"version":3,"sources":["file:///Users/med_yassine_khlaf/Documents/GitHub/PetConnect_PWA/models/User.ts"],"sourcesContent":["import mongoose, { Document, Schema } from \"mongoose\";\nimport bcrypt from \"bcryptjs\";\nimport connectDB from \"@/lib/db\";\n\nexport interface IUser extends Document {\n  _id: mongoose.Types.ObjectId;\n  firstName: string;\n  lastName: string;\n  email: string;\n  password: string;\n  phone?: string;\n  address?: string;\n  avatar?: string;\n  role: \"user\" | \"admin\" | \"vet\";\n  isVerified: boolean;\n  emailVerificationToken?: string;\n  emailVerificationExpires?: Date;\n  otp?: string;\n  otpExpires?: Date;\n  resetPasswordToken?: string;\n  resetPasswordExpires?: Date;\n  createdAt: Date;\n  updatedAt: Date;\n  googleId?: string;\n  comparePassword(candidatePassword: string): Promise<boolean>;\n}\n\nconst UserSchema = new Schema<IUser>(\n  {\n    firstName: { type: String, required: true, trim: true, maxlength: 50 },\n    lastName: { type: String, required: true, trim: true, maxlength: 50 },\n    email: {\n      type: String,\n      required: true,\n      unique: true,\n      lowercase: true,\n      match: [\n        /^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/,\n        \"Email invalide\",\n      ],\n    },\n    password: { type: String, required: true, minlength: 6, select: false },\n    phone: { type: String, maxlength: 20 },\n    address: { type: String, maxlength: 200 },\n    avatar: {\n      type: String,\n      default:\n        \"https://ui-avatars.com/api/?name=User&background=FF9A3D&color=fff&size=200&bold=true\",\n    },\n    role: { type: String, enum: [\"user\", \"admin\", \"vet\"], default: \"user\" },\n    isVerified: { type: Boolean, default: false },\n    emailVerificationToken: { type: String, select: false },\n    emailVerificationExpires: { type: Date, select: false },\n    otp: { type: String, select: false },\n    otpExpires: { type: Date, select: false },\n    resetPasswordToken: { type: String, select: false },\n    resetPasswordExpires: { type: Date, select: false },\n    googleId: {\n      type: String,\n      required: false,\n      unique: true,\n      sparse: true,\n    },\n  },\n  { timestamps: true }\n);\n\n// Hash password before saving\nUserSchema.pre(\"save\", async function (next) {\n  if (!this.isModified(\"password\")) return next();\n  const salt = await bcrypt.genSalt(10);\n  this.password = await bcrypt.hash(this.password, salt);\n  next();\n});\n\n// Compare passwords\nUserSchema.methods.comparePassword = async function (\n  candidatePassword: string\n): Promise<boolean> {\n  return bcrypt.compare(candidatePassword, this.password);\n};\n\nconst User: mongoose.Model<IUser> =\n  mongoose.models.User || mongoose.model<IUser>(\"User\", UserSchema);\n\nexport default User;\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AA0BA,MAAM,aAAa,IAAI,mHAAM,CAC3B;IACE,WAAW;QAAE,MAAM;QAAQ,UAAU;QAAM,MAAM;QAAM,WAAW;IAAG;IACrE,UAAU;QAAE,MAAM;QAAQ,UAAU;QAAM,MAAM;QAAM,WAAW;IAAG;IACpE,OAAO;QACL,MAAM;QACN,UAAU;QACV,QAAQ;QACR,WAAW;QACX,OAAO;YACL;YACA;SACD;IACH;IACA,UAAU;QAAE,MAAM;QAAQ,UAAU;QAAM,WAAW;QAAG,QAAQ;IAAM;IACtE,OAAO;QAAE,MAAM;QAAQ,WAAW;IAAG;IACrC,SAAS;QAAE,MAAM;QAAQ,WAAW;IAAI;IACxC,QAAQ;QACN,MAAM;QACN,SACE;IACJ;IACA,MAAM;QAAE,MAAM;QAAQ,MAAM;YAAC;YAAQ;YAAS;SAAM;QAAE,SAAS;IAAO;IACtE,YAAY;QAAE,MAAM;QAAS,SAAS;IAAM;IAC5C,wBAAwB;QAAE,MAAM;QAAQ,QAAQ;IAAM;IACtD,0BAA0B;QAAE,MAAM;QAAM,QAAQ;IAAM;IACtD,KAAK;QAAE,MAAM;QAAQ,QAAQ;IAAM;IACnC,YAAY;QAAE,MAAM;QAAM,QAAQ;IAAM;IACxC,oBAAoB;QAAE,MAAM;QAAQ,QAAQ;IAAM;IAClD,sBAAsB;QAAE,MAAM;QAAM,QAAQ;IAAM;IAClD,UAAU;QACR,MAAM;QACN,UAAU;QACV,QAAQ;QACR,QAAQ;IACV;AACF,GACA;IAAE,YAAY;AAAK;AAGrB,8BAA8B;AAC9B,WAAW,GAAG,CAAC,QAAQ,eAAgB,IAAI;IACzC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,aAAa,OAAO;IACzC,MAAM,OAAO,MAAM,8IAAM,CAAC,OAAO,CAAC;IAClC,IAAI,CAAC,QAAQ,GAAG,MAAM,8IAAM,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;IACjD;AACF;AAEA,oBAAoB;AACpB,WAAW,OAAO,CAAC,eAAe,GAAG,eACnC,iBAAyB;IAEzB,OAAO,8IAAM,CAAC,OAAO,CAAC,mBAAmB,IAAI,CAAC,QAAQ;AACxD;AAEA,MAAM,OACJ,oHAAQ,CAAC,MAAM,CAAC,IAAI,IAAI,oHAAQ,CAAC,KAAK,CAAQ,QAAQ;uCAEzC","debugId":null}},
    {"offset": {"line": 297, "column": 0}, "map": {"version":3,"sources":["file:///Users/med_yassine_khlaf/Documents/GitHub/PetConnect_PWA/models/Pet.ts"],"sourcesContent":["import mongoose, { Schema, Document } from \"mongoose\";\n\nexport interface IPet extends Document {\n  owner: mongoose.Types.ObjectId;\n  name: string;\n  type: string;\n  breed: string;\n  age?: string;\n  gender: string;\n  weight: string;\n  image: string;\n  microchip?: string;\n  birthdate?: string;\n  status?: string;\n}\n\nconst PetSchema = new Schema<IPet>(\n  {\n    owner: { type: Schema.Types.ObjectId, ref: \"User\", required: true },\n    name: { type: String, required: true },\n    type: { type: String, required: true },\n    breed: { type: String, required: true },\n    age: { type: String, required: true },\n    gender: { type: String, required: true },\n    weight: { type: String },\n    image: { type: String },\n    microchip: { type: String },\n    birthdate: { type: String },\n    status: { type: String, default: \"Actif\" },\n  },\n  { timestamps: true }\n);\n\nconst Pet = mongoose.models.Pet || mongoose.model<IPet>(\"Pet\", PetSchema);\nexport default Pet;\n"],"names":[],"mappings":";;;;AAAA;;AAgBA,MAAM,YAAY,IAAI,mHAAM,CAC1B;IACE,OAAO;QAAE,MAAM,mHAAM,CAAC,KAAK,CAAC,QAAQ;QAAE,KAAK;QAAQ,UAAU;IAAK;IAClE,MAAM;QAAE,MAAM;QAAQ,UAAU;IAAK;IACrC,MAAM;QAAE,MAAM;QAAQ,UAAU;IAAK;IACrC,OAAO;QAAE,MAAM;QAAQ,UAAU;IAAK;IACtC,KAAK;QAAE,MAAM;QAAQ,UAAU;IAAK;IACpC,QAAQ;QAAE,MAAM;QAAQ,UAAU;IAAK;IACvC,QAAQ;QAAE,MAAM;IAAO;IACvB,OAAO;QAAE,MAAM;IAAO;IACtB,WAAW;QAAE,MAAM;IAAO;IAC1B,WAAW;QAAE,MAAM;IAAO;IAC1B,QAAQ;QAAE,MAAM;QAAQ,SAAS;IAAQ;AAC3C,GACA;IAAE,YAAY;AAAK;AAGrB,MAAM,MAAM,oHAAQ,CAAC,MAAM,CAAC,GAAG,IAAI,oHAAQ,CAAC,KAAK,CAAO,OAAO;uCAChD","debugId":null}},
    {"offset": {"line": 354, "column": 0}, "map": {"version":3,"sources":["file:///Users/med_yassine_khlaf/Documents/GitHub/PetConnect_PWA/models/TrainingSession.ts"],"sourcesContent":["import mongoose, { Schema, Document } from \"mongoose\";\n\n// Interface pour une le√ßon individuelle\nexport interface ILesson {\n  id: string;\n  title: string;\n  description: string;\n  duration: number; // en minutes\n  difficulty: \"beginner\" | \"intermediate\" | \"advanced\";\n  instructions: string[];\n  tips: string[];\n  completed: boolean;\n  completedAt?: Date;\n  score?: number; // 0-100\n}\n\n// Interface pour un programme d'entra√Ænement\nexport interface ITrainingProgram {\n  id: string;\n  name: string;\n  category:\n    | \"obedience\"\n    | \"leash\"\n    | \"tricks\"\n    | \"socialization\"\n    | \"housetraining\";\n  description: string;\n  icon: string;\n  totalLessons: number;\n  completedLessons: number;\n  progress: number; // 0-100\n  lessons: ILesson[];\n  estimatedWeeks: number;\n  difficulty: \"beginner\" | \"intermediate\" | \"advanced\";\n}\n\n// Interface pour une session d'entra√Ænement\nexport interface ITrainingSession extends Document {\n  userId: mongoose.Types.ObjectId;\n  petId: mongoose.Types.ObjectId;\n  programId: string;\n  lessonId: string;\n  startedAt: Date;\n  completedAt?: Date;\n  duration: number; // dur√©e r√©elle en minutes\n  score?: number; // 0-100\n  notes?: string;\n  difficulty: \"easy\" | \"medium\" | \"hard\";\n  nextSessionDate?: Date;\n  createdAt: Date;\n  updatedAt: Date;\n}\n\n// Interface pour les statistiques de progression\nexport interface IProgressStats {\n  petId: string;\n  programs: {\n    [programId: string]: {\n      progress: number;\n      completedLessons: number;\n      totalLessons: number;\n      lastSessionDate?: Date;\n      averageScore?: number;\n    };\n  };\n  totalSessionsCompleted: number;\n  totalTrainingTime: number; // en minutes\n  currentStreak: number; // jours cons√©cutifs\n  longestStreak: number;\n  lastSessionDate?: Date;\n}\n\n// Sch√©ma MongoDB pour les sessions d'entra√Ænement\nconst TrainingSessionSchema = new Schema<ITrainingSession>(\n  {\n    userId: { type: Schema.Types.ObjectId, ref: \"User\", required: true },\n    petId: { type: Schema.Types.ObjectId, ref: \"Pet\", required: true },\n    programId: { type: String, required: true },\n    lessonId: { type: String, required: true },\n    startedAt: { type: Date, required: true },\n    completedAt: { type: Date },\n    duration: { type: Number, required: true },\n    score: { type: Number, min: 0, max: 100 },\n    notes: { type: String },\n    difficulty: {\n      type: String,\n      enum: [\"easy\", \"medium\", \"hard\"],\n      required: true,\n    },\n    nextSessionDate: { type: Date },\n  },\n  {\n    timestamps: true,\n  }\n);\n\n// Index pour optimiser les requ√™tes\nTrainingSessionSchema.index({ userId: 1, petId: 1 });\nTrainingSessionSchema.index({ programId: 1, lessonId: 1 });\nTrainingSessionSchema.index({ startedAt: -1 });\n\nexport default mongoose.models.TrainingSession ||\n  mongoose.model<ITrainingSession>(\"TrainingSession\", TrainingSessionSchema);\n"],"names":[],"mappings":";;;;AAAA;;AAwEA,kDAAkD;AAClD,MAAM,wBAAwB,IAAI,mHAAM,CACtC;IACE,QAAQ;QAAE,MAAM,mHAAM,CAAC,KAAK,CAAC,QAAQ;QAAE,KAAK;QAAQ,UAAU;IAAK;IACnE,OAAO;QAAE,MAAM,mHAAM,CAAC,KAAK,CAAC,QAAQ;QAAE,KAAK;QAAO,UAAU;IAAK;IACjE,WAAW;QAAE,MAAM;QAAQ,UAAU;IAAK;IAC1C,UAAU;QAAE,MAAM;QAAQ,UAAU;IAAK;IACzC,WAAW;QAAE,MAAM;QAAM,UAAU;IAAK;IACxC,aAAa;QAAE,MAAM;IAAK;IAC1B,UAAU;QAAE,MAAM;QAAQ,UAAU;IAAK;IACzC,OAAO;QAAE,MAAM;QAAQ,KAAK;QAAG,KAAK;IAAI;IACxC,OAAO;QAAE,MAAM;IAAO;IACtB,YAAY;QACV,MAAM;QACN,MAAM;YAAC;YAAQ;YAAU;SAAO;QAChC,UAAU;IACZ;IACA,iBAAiB;QAAE,MAAM;IAAK;AAChC,GACA;IACE,YAAY;AACd;AAGF,oCAAoC;AACpC,sBAAsB,KAAK,CAAC;IAAE,QAAQ;IAAG,OAAO;AAAE;AAClD,sBAAsB,KAAK,CAAC;IAAE,WAAW;IAAG,UAAU;AAAE;AACxD,sBAAsB,KAAK,CAAC;IAAE,WAAW,CAAC;AAAE;uCAE7B,oHAAQ,CAAC,MAAM,CAAC,eAAe,IAC5C,oHAAQ,CAAC,KAAK,CAAmB,mBAAmB","debugId":null}},
    {"offset": {"line": 431, "column": 0}, "map": {"version":3,"sources":["file:///Users/med_yassine_khlaf/Documents/GitHub/PetConnect_PWA/services/userService.ts"],"sourcesContent":["import connectDB from \"../lib/db\";\nimport User, { IUser } from \"../models/User\";\nimport jwt from \"jsonwebtoken\";\nimport crypto from \"crypto\";\nimport nodemailer from \"nodemailer\";\n\nconst JWT_SECRET = process.env.JWT_SECRET || \"your-secret-key\";\n\nexport class UserService {\n  // 1. Register (Inscription)\n  static async register(userData: {\n    firstName: string;\n    lastName: string;\n    email: string;\n    password: string;\n    phone?: string;\n    address?: string;\n    avatar?: string;\n  }): Promise<{ user: IUser; message: string }> {\n    await connectDB();\n\n    const existingUser = await User.findOne({ email: userData.email });\n    if (existingUser) {\n      throw new Error(\"Cet email est d√©j√† utilis√©\");\n    }\n\n    // G√©n√©rer un avatar par d√©faut avec les initiales si non fourni\n    const initials = `${userData.firstName.charAt(0)}${userData.lastName.charAt(\n      0\n    )}`;\n    const defaultAvatar = `https://ui-avatars.com/api/?name=${encodeURIComponent(\n      initials\n    )}&background=FF9A3D&color=fff&size=200&bold=true&rounded=true`;\n\n    // Cr√©er l'utilisateur (non v√©rifi√© par d√©faut)\n    const user = new User({\n      ...userData,\n      avatar: userData.avatar || defaultAvatar,\n    });\n\n    // G√©n√©rer un token de v√©rification d'email\n    const verificationToken = crypto.randomBytes(32).toString(\"hex\");\n    const hashedToken = crypto\n      .createHash(\"sha256\")\n      .update(verificationToken)\n      .digest(\"hex\");\n\n    user.emailVerificationToken = hashedToken;\n    user.emailVerificationExpires = new Date(Date.now() + 24 * 60 * 60 * 1000); // 24 heures\n\n    await user.save();\n\n    // Envoyer l'email de v√©rification\n    try {\n      await this.sendVerificationEmail(\n        user.email,\n        verificationToken,\n        user.firstName\n      );\n    } catch (emailError) {\n      console.error(\"Erreur lors de l'envoi de l'email:\", emailError);\n      // Ne pas bloquer l'inscription si l'email √©choue\n    }\n\n    return {\n      user,\n      message:\n        \"Inscription r√©ussie ! Un email de v√©rification a √©t√© envoy√© √† votre adresse.\",\n    };\n  }\n\n  // Envoyer l'email de v√©rification\n  static async sendVerificationEmail(\n    email: string,\n    token: string,\n    firstName: string\n  ): Promise<void> {\n    const transporter = nodemailer.createTransport({\n      service: \"gmail\",\n      auth: {\n        user: process.env.EMAIL_USER,\n        pass: process.env.EMAIL_PASS,\n      },\n    });\n\n    const verificationUrl = `${process.env.NEXT_PUBLIC_API_URL}/auth/verify-email?token=${token}`;\n\n    const mailOptions = {\n      from: process.env.EMAIL_USER,\n      to: email,\n      subject: \"üêæ V√©rifiez votre compte PetConnect\",\n      html: `\n        <!DOCTYPE html>\n        <html>\n        <head>\n          <meta charset=\"UTF-8\">\n          <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n        </head>\n        <body style=\"margin: 0; padding: 0; font-family: Arial, sans-serif; background-color: #f4f4f4;\">\n          <table role=\"presentation\" style=\"width: 100%; border-collapse: collapse;\">\n            <tr>\n              <td align=\"center\" style=\"padding: 40px 0;\">\n                <table role=\"presentation\" style=\"width: 600px; border-collapse: collapse; background-color: #ffffff; border-radius: 10px; overflow: hidden; box-shadow: 0 4px 6px rgba(0,0,0,0.1);\">\n                  <!-- Header -->\n                  <tr>\n                    <td style=\"background-color: #FF9A3D; padding: 40px; text-align: center;\">\n                      <h1 style=\"color: #ffffff; margin: 0; font-size: 32px;\">üêæ PetConnect</h1>\n                    </td>\n                  </tr>\n                  <!-- Body -->\n                  <tr>\n                    <td style=\"padding: 40px 30px; background-color: #f9f9f9;\">\n                      <h2 style=\"color: #333333; margin: 0 0 20px 0; font-size: 24px;\">Bonjour ${firstName} !</h2>\n                      <p style=\"color: #666666; font-size: 16px; line-height: 1.6; margin: 0 0 30px 0;\">\n                        Bienvenue sur PetConnect ! Pour compl√©ter votre inscription, veuillez v√©rifier votre adresse email en cliquant sur le bouton ci-dessous :\n                      </p>\n                      <!-- Button -->\n                      <table role=\"presentation\" style=\"width: 100%; border-collapse: collapse;\">\n                        <tr>\n                          <td align=\"center\" style=\"padding: 20px 0;\">\n                            <a href=\"${verificationUrl}\" style=\"background-color: #FF9A3D; color: #ffffff; padding: 16px 50px; text-decoration: none; border-radius: 30px; font-weight: bold; font-size: 16px; display: inline-block; box-shadow: 0 4px 6px rgba(255, 154, 61, 0.3);\">\n                              ‚úÖ V√©rifier mon email\n                            </a>\n                          </td>\n                        </tr>\n                      </table>\n                      \n                    </td>\n                  </tr>\n                  <!-- Footer -->\n                  <tr>\n                    <td style=\"padding: 30px; background-color: #ffffff; border-top: 1px solid #eeeeee;\">\n                      <p style=\"color: #999999; font-size: 12px; text-align: center; margin: 0;\">\n                        Si vous n'avez pas cr√©√© de compte PetConnect, ignorez cet email.\n                      </p>\n                    </td>\n                  </tr>\n                </table>\n              </td>\n            </tr>\n          </table>\n        </body>\n        </html>\n      `,\n    };\n\n    await transporter.sendMail(mailOptions);\n  }\n\n  // 2. Login (Connexion)\n  static async login(\n    email: string,\n    password: string\n  ): Promise<{ user: IUser; token: string }> {\n    await connectDB();\n\n    const user = await User.findOne({ email }).select(\"+password\");\n    if (!user) {\n      throw new Error(\"Email ou mot de passe incorrect\");\n    }\n\n    const isPasswordValid = await user.comparePassword(password);\n    if (!isPasswordValid) {\n      throw new Error(\"Email ou mot de passe incorrect\");\n    }\n    // V√©rifier si l'email est v√©rifi√© (sauf pour les comptes Google)\n    if (!user.isVerified && !user.googleId) {\n      throw new Error(\n        \"Veuillez v√©rifier votre email avant de vous connecter. V√©rifiez votre bo√Æte de r√©ception.\"\n      );\n    }\n\n    const token = jwt.sign(\n      { userId: user._id, email: user.email, role: user.role },\n      JWT_SECRET,\n      { expiresIn: \"7d\" }\n    );\n\n    return { user, token };\n  }\n\n  // 3. Update Profile (Mettre √† jour le profil)\n  static async updateProfile(\n    userId: string,\n    updateData: Partial<{\n      firstName: string;\n      lastName: string;\n      phone: string;\n      address: string;\n      avatar: string;\n    }>\n  ): Promise<IUser | null> {\n    await connectDB();\n    return User.findByIdAndUpdate(userId, updateData, {\n      new: true,\n      runValidators: true,\n    });\n  }\n\n  // 4. Forget Password (Demander r√©initialisation de mot de passe)\n  static async forgetPassword(\n    email: string\n  ): Promise<{ resetToken: string; message: string }> {\n    await connectDB();\n\n    const user = await User.findOne({ email });\n    if (!user) {\n      throw new Error(\"Aucun utilisateur trouv√© avec cet email\");\n    }\n\n    const resetToken = crypto.randomBytes(32).toString(\"hex\");\n    const hashedToken = crypto\n      .createHash(\"sha256\")\n      .update(resetToken)\n      .digest(\"hex\");\n    const expires = new Date(Date.now() + 10 * 60 * 1000); // 10 minutes\n\n    user.resetPasswordToken = hashedToken;\n    user.resetPasswordExpires = expires;\n    await user.save();\n\n    // Ici, vous pourriez int√©grer un service d'email pour envoyer le token par mail\n    // Exemple : await sendEmail(email, 'R√©initialisation de mot de passe', `Votre token: ${resetToken}`);\n\n    return {\n      resetToken,\n      message:\n        \"Un token de r√©initialisation a √©t√© g√©n√©r√© (√† envoyer par email)\",\n    };\n  }\n\n  // 5. Generate OTP (G√©n√©rer un OTP pour forgot password)\n  static async generateOTP(\n    email: string\n  ): Promise<{ otp: string; message: string }> {\n    await connectDB();\n\n    const user = await User.findOne({ email: email.toLowerCase() });\n    if (!user) {\n      throw new Error(\"Aucun utilisateur trouv√© avec cet email\");\n    }\n\n    // G√©n√©rer un OTP √† 6 chiffres\n    const otp = Math.floor(100000 + Math.random() * 900000).toString();\n    const otpExpires = new Date(Date.now() + 10 * 60 * 1000); // 10 minutes\n\n    user.otp = otp;\n    user.otpExpires = otpExpires;\n    await user.save();\n\n    return {\n      otp,\n      message: \"Un code OTP a √©t√© g√©n√©r√©\",\n    };\n  }\n\n  // 6. Verify OTP (V√©rifier OTP re√ßu par email)\n  static async verifyOTP(\n    email: string,\n    otp: string\n  ): Promise<{ user: IUser; resetToken: string; message: string }> {\n    await connectDB();\n\n    const user = await User.findOne({\n      email: email.toLowerCase(),\n    }).select(\"+otp +otpExpires\");\n\n    if (!user) {\n      throw new Error(\"Utilisateur non trouv√©\");\n    }\n\n    if (!user.otp || !user.otpExpires) {\n      throw new Error(\"Aucun OTP n'a √©t√© g√©n√©r√© pour cet utilisateur\");\n    }\n\n    if (user.otp !== otp) {\n      throw new Error(\"OTP invalide\");\n    }\n\n    if (user.otpExpires < new Date()) {\n      throw new Error(\"OTP expir√©\");\n    }\n\n    // G√©n√©rer un token de r√©initialisation\n    const resetToken = crypto.randomBytes(32).toString(\"hex\");\n    const hashedToken = crypto\n      .createHash(\"sha256\")\n      .update(resetToken)\n      .digest(\"hex\");\n    const expires = new Date(Date.now() + 10 * 60 * 1000); // 10 minutes\n\n    user.resetPasswordToken = hashedToken;\n    user.resetPasswordExpires = expires;\n    user.otp = undefined;\n    user.otpExpires = undefined;\n    await user.save();\n\n    return {\n      user,\n      resetToken,\n      message: \"OTP v√©rifi√© avec succ√®s\",\n    };\n  }\n\n  // 7. Reset Password (R√©initialiser le mot de passe avec token)\n  static async resetPassword(\n    token: string,\n    newPassword: string\n  ): Promise<{ user: IUser; message: string }> {\n    await connectDB();\n\n    const hashedToken = crypto.createHash(\"sha256\").update(token).digest(\"hex\");\n\n    const user = await User.findOne({\n      resetPasswordToken: hashedToken,\n      resetPasswordExpires: { $gt: new Date() },\n    }).select(\"+password\");\n\n    if (!user) {\n      throw new Error(\"Token invalide ou expir√©\");\n    }\n\n    user.password = newPassword;\n    user.resetPasswordToken = undefined;\n    user.resetPasswordExpires = undefined;\n    await user.save();\n\n    return { user, message: \"Mot de passe r√©initialis√© avec succ√®s\" };\n  }\n\n  // 8. Change Password (Changer le mot de passe actuel)\n  static async changePassword(\n    userId: string,\n    currentPassword: string,\n    newPassword: string\n  ): Promise<{ user: IUser; message: string }> {\n    await connectDB();\n\n    const user = await User.findById(userId).select(\"+password\");\n    if (!user) {\n      throw new Error(\"Utilisateur non trouv√©\");\n    }\n\n    const isCurrentPasswordValid = await user.comparePassword(currentPassword);\n    if (!isCurrentPasswordValid) {\n      throw new Error(\"Mot de passe actuel incorrect\");\n    }\n\n    user.password = newPassword;\n    await user.save();\n\n    return { user, message: \"Mot de passe chang√© avec succ√®s\" };\n  }\n\n  // 9. Delete Profile (Supprimer le profil)\n  static async deleteProfile(userId: string): Promise<{ message: string }> {\n    await connectDB();\n\n    const user = await User.findByIdAndDelete(userId);\n    if (!user) {\n      throw new Error(\"Utilisateur non trouv√©\");\n    }\n\n    return { message: \"Profil supprim√© avec succ√®s\" };\n  }\n\n  // 10. Get User by ID (R√©cup√©rer un utilisateur par ID)\n  static async getUserById(userId: string): Promise<IUser | null> {\n    await connectDB();\n    return User.findById(userId);\n  }\n\n  // 11. Get All Users (Admin only)\n  static async getAllUsers(): Promise<IUser[]> {\n    await connectDB();\n    return User.find({}).sort({ createdAt: -1 });\n  }\n\n  // 12. Get User by Email\n  static async getUserByEmail(email: string): Promise<IUser | null> {\n    await connectDB();\n    return User.findOne({ email: email.toLowerCase() });\n  }\n\n  // 13. Update User Role (Admin only)\n  static async updateUserRole(\n    userId: string,\n    role: \"user\" | \"admin\" | \"vet\"\n  ): Promise<IUser | null> {\n    await connectDB();\n    return User.findByIdAndUpdate(\n      userId,\n      { role },\n      { new: true, runValidators: true }\n    );\n  }\n\n  // 14. Delete Account (Suppression compl√®te du compte)\n  static async deleteAccount(userId: string): Promise<boolean> {\n    await connectDB();\n\n    try {\n      console.log(`üóëÔ∏è D√©but de la suppression du compte: ${userId}`);\n\n      // 1. Supprimer l'utilisateur principal\n      const user = await User.findByIdAndDelete(userId);\n      if (!user) {\n        throw new Error(\"Utilisateur non trouv√©\");\n      }\n      console.log(`‚úÖ Utilisateur supprim√©: ${user.email}`);\n\n      // 2. Supprimer tous les animaux de l'utilisateur\n      // Note: Nous devrons importer le mod√®le Pet si disponible\n      try {\n        const Pet = require(\"../models/Pet\").default;\n        const deletedPets = await Pet.deleteMany({ userId: userId });\n        console.log(`‚úÖ ${deletedPets.deletedCount} animaux supprim√©s`);\n      } catch (error) {\n        console.log(\n          \"‚ÑπÔ∏è Mod√®le Pet non disponible ou pas d'animaux √† supprimer\"\n        );\n      }\n\n      // 3. Supprimer les donn√©es de sant√©\n      try {\n        const fs = require(\"fs\").promises;\n        const path = require(\"path\");\n        const healthDbPath = path.join(process.cwd(), \"data\", \"health.json\");\n\n        const healthData = JSON.parse(await fs.readFile(healthDbPath, \"utf8\"));\n        healthData.pets = healthData.pets.filter(\n          (pet: any) => pet.userId !== userId\n        );\n        await fs.writeFile(healthDbPath, JSON.stringify(healthData, null, 2));\n        console.log(\"‚úÖ Donn√©es de sant√© supprim√©es\");\n      } catch (error) {\n        console.log(\"‚ÑπÔ∏è Pas de donn√©es de sant√© √† supprimer\");\n      }\n\n      // 4. Supprimer les sessions d'entra√Ænement\n      try {\n        const TrainingSession = require(\"../models/TrainingSession\").default;\n        const deletedSessions = await TrainingSession.deleteMany({\n          userId: userId,\n        });\n        console.log(\n          `‚úÖ ${deletedSessions.deletedCount} sessions d'entra√Ænement supprim√©es`\n        );\n      } catch (error) {\n        console.log(\"‚ÑπÔ∏è Pas de sessions d'entra√Ænement √† supprimer\");\n      }\n\n      // 5. Supprimer les rendez-vous (si stock√©s en base)\n      // Note: Les rendez-vous semblent √™tre en m√©moire, donc pas de suppression n√©cessaire\n\n      console.log(\n        `üéâ Suppression compl√®te du compte ${userId} termin√©e avec succ√®s`\n      );\n      return true;\n    } catch (error: any) {\n      console.error(\n        `‚ùå Erreur lors de la suppression du compte ${userId}:`,\n        error.message\n      );\n      throw new Error(\n        `Erreur lors de la suppression du compte: ${error.message}`\n      );\n    }\n  }\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 802, "column": 0}, "map": {"version":3,"sources":["file:///Users/med_yassine_khlaf/Documents/GitHub/PetConnect_PWA/app/api/auth/login/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from \"next/server\";\nimport jwt from \"jsonwebtoken\";\nimport { UserService } from \"@/services/userService\";\n\nexport async function POST(request: NextRequest) {\n  try {\n    const body = await request.json();\n    const { email, password } = body;\n\n    if (!email || !password) {\n      return NextResponse.json(\n        { error: \"Email et mot de passe sont requis\" },\n        { status: 400 }\n      );\n    }\n\n    // UserService.login retourne { user, token }\n    const result = await UserService.login(email, password);\n\n    // Le token est d√©j√† g√©n√©r√© par UserService.login\n    // Pas besoin de le reg√©n√©rer ici\n\n    return NextResponse.json(\n      {\n        message: \"Connexion r√©ussie\",\n        user: result.user,\n        token: result.token,\n      },\n      { status: 200 }\n    );\n  } catch (error: any) {\n    console.error(\"Erreur login:\", error);\n    return NextResponse.json(\n      { error: error.message || \"Erreur serveur\" },\n      { status: 500 }\n    );\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AAEA;;;AAEO,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG;QAE5B,IAAI,CAAC,SAAS,CAAC,UAAU;YACvB,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAoC,GAC7C;gBAAE,QAAQ;YAAI;QAElB;QAEA,6CAA6C;QAC7C,MAAM,SAAS,MAAM,wIAAW,CAAC,KAAK,CAAC,OAAO;QAE9C,iDAAiD;QACjD,iCAAiC;QAEjC,OAAO,gJAAY,CAAC,IAAI,CACtB;YACE,SAAS;YACT,MAAM,OAAO,IAAI;YACjB,OAAO,OAAO,KAAK;QACrB,GACA;YAAE,QAAQ;QAAI;IAElB,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,iBAAiB;QAC/B,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO,MAAM,OAAO,IAAI;QAAiB,GAC3C;YAAE,QAAQ;QAAI;IAElB;AACF","debugId":null}}]
}